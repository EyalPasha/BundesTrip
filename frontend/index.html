<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Add this in the HEAD section of your HTML -->
        <meta http-equiv="Content-Security-Policy" content="connect-src 'self' http://localhost:8000 http://0.0.0.0:8000 http://127.0.0.1:8000 http://10.0.0.28:8000 http://10.0.0.67:8000 https://*.ngrok-free.app https://*.ngrok.io;">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>BundesTrip - Football Match Trip Planner</title>
        <!-- Add favicon -->
        <link rel="icon" href="./logos/logo.png" type="image/png">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
        
        <!-- Add this immediately after your Select2 CSS link in the head section -->
        <script>
            // Pre-initialize select2 variables to prevent FOUC
            document.documentElement.className += ' select2-loading';
        </script>
        
        <!-- CSS files -->
        <link rel="stylesheet" href="styles/base.css">
        <link rel="stylesheet" href="styles/layout.css">
        <link rel="stylesheet" href="styles/components.css">
        <link rel="stylesheet" href="styles/forms.css">
        <link rel="stylesheet" href="styles/select2.css">
        <link rel="stylesheet" href="styles/animations.css">
        <link rel="stylesheet" href="styles/calendar.css">
        <link rel="stylesheet" href="styles/trip-cards.css">
        <link rel="stylesheet" href="styles/loading-animation.css">
        <link rel="stylesheet" href="styles/mobile.css">
    </head>
<body>
<!-- Update the navigation section in index.html -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary sticky-top">
    <div class="container">
        <a class="navbar-brand" href="./index.html">
            <img src="./logos/blank_logo.png" alt="BundesTrip Logo" height="30" class="d-inline-block align-middle me-2">
            BundesTrip
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link active" href="./index.html">Trip Planner</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./schedules.html">Schedules</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="./about.html">About Us</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

    <header class="hero">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h1 class="display-4 fw-bold">Plan Your Perfect Football Trip</h1>
                    <p class="lead">Discover the best way to watch multiple matches across Germany with optimized travel plans.</p>
                </div>
                <div class="col-md-6">
                    <div class="card shadow search-card">
                        <div class="card-body">
                            <h2 class="card-title mb-4">Find Your Trip</h2>
                            <form id="tripSearchForm">
                                <!-- Add this after opening form tag -->
                                <!-- Form preloaders - will be automatically hidden when real elements are ready -->
                                <div class="form-preloaders d-none d-md-block">
                                    <!-- These will only display during loading and will match final dimensions -->
                                </div>
                                <!-- Wrap form sections for better mobile organization -->
                                <div class="form-section">
                                    <div class="mb-3">
                                        <label for="startLocation" class="form-label">
                                            <i class="fas fa-map-marker-alt icon"></i> Starting Location <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-select select-hidden" id="startLocation" required>
                                            <option value="" selected disabled>Select a city</option>
                                            <!-- Cities will be loaded dynamically -->
                                        </select>
                                        <div class="invalid-feedback">Please select a starting location</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <label for="startDate" class="form-label">
                                            <i class="fas fa-calendar-alt icon"></i> Start Date <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" class="form-control select-hidden" id="startDate" placeholder="Select date" required>
                                        <div class="invalid-feedback">Please select a start date</div>
                                    </div>
                                </div>
                                
                                <div class="form-section">
                                    <!-- Trip Duration (days) - Dropdown -->
                                    <div class="mb-3">
                                        <label for="tripDuration" class="form-label">
                                            <i class="fas fa-clock icon"></i> Trip Duration <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-select select-hidden" id="tripDuration">
                                            <!-- Options 2-10 days -->
                                            <option value="2">2 Days</option>
                                            <option value="3" selected>3 Days</option>
                                            <option value="4">4 Days</option>
                                            <option value="5">5 Days</option>
                                            <option value="6">6 Days</option>
                                            <option value="7">7 Days</option>
                                            <option value="8">8 Days</option>
                                            <option value="9">9 Days</option>
                                            <option value="10">10 Days</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Max Travel Time (min) - Dropdown -->
                                    <div class="mb-3">
                                        <label for="maxTravelTime" class="form-label">
                                            <i class="fas fa-route icon"></i> Max Travel Time <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-select select-hidden" id="maxTravelTime">
                                            <option value="30">30 Minutes</option>
                                            <option value="45">45 Minutes</option>
                                            <option value="60">1 Hour </option>
                                            <option value="75">1 Hour 15 Minutes</option>
                                            <option value="90">1 Hour 30 Minutes</option>
                                            <option value="105">1 Hour 45 Minutes</option>
                                            <option value="120" selected>2 Hours</option>
                                            <option value="135">2 Hours 15 Minutes</option>
                                            <option value="150">2 Hours 30 Minutes</option>
                                            <option value="165">2 Hours 45 Minutes</option>
                                            <option value="180">3 Hours</option>
                                            <option value="210">3 Hours 30 Minutes</option>
                                            <option value="240">4 Hours</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="form-section">
                                    <!-- Minimum Games - Dropdown -->
                                    <div class="mb-3">
                                        <label for="minGames" class="form-label">
                                            <i class="fas fa-ticket-alt icon"></i> Min. Games Per Trip
                                        </label>
                                        <select class="form-select select-hidden" id="minGames">
                                            <option value="1">1 Game</option>
                                            <option value="2" selected>2 Games</option>
                                            <option value="3">3 Games</option>
                                            <option value="4">4 Games</option>
                                            <option value="5">5 Games</option>
                                            <!-- More options will be adjusted dynamically based on trip duration -->
                                        </select>
                                    </div>

                                    <!-- Update the Preferred Leagues section -->
                                    <div class="mb-3">
                                        <label for="preferredLeagues" class="form-label">
                                            <i class="fas fa-trophy icon"></i> Preferred Leagues
                                        </label>
                                        <div id="preferredLeaguesContainer" class="position-relative">
                                            <select class="form-select select-hidden" id="preferredLeagues" multiple="multiple">
                                                <!-- Options will be loaded dynamically -->
                                            </select>
                                        </div>
                                        <div class="form-text">Select none to include all leagues</div>
                                    </div>
                                    
                                    <!-- Update the Must Include Teams section -->
                                    <div class="mb-3">
                                        <label for="mustTeams" class="form-label">
                                            <i class="fas fa-futbol icon"></i> Must Include Teams
                                        </label>
                                        <div id="mustTeamsContainer" class="position-relative">
                                            <select class="form-select select-hidden" id="mustTeams" multiple="multiple">
                                                <!-- Options will be loaded dynamically -->
                                            </select>
                                        </div>
                                        <div class="form-text">Teams you absolutely want to see play</div>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary w-100 py-2">
                                    <i class="fas fa-search me-2"></i> Search Trips
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <section id="results" class="py-5 d-none">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 mb-4">
                        <div id="filterResultsCard" class="card d-none filter-card sticky-top filter-card-sticky">
                            <div class="card-body">
                                <h3 class="card-title">Filter Results</h3>
                                
                                <!-- New Sliders -->
                                <div class="row mb-4">
                                    <div class="col-md-12 mb-3">
                                        <div class="form-group">
                                            <label for="gamesSlider" class="d-flex justify-content-between">
                                                <span>Number of Games:</span>
                                                <span class="badge bg-primary" id="gamesSliderValue">Any</span>
                                            </label>
                                            <input type="range" class="form-range" id="gamesSlider" min="1" max="10" value="1">
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <label for="hotelChangesSlider" class="d-flex justify-content-between">
                                                <span>Max Hotel Changes:</span> 
                                                <span class="badge bg-primary" id="hotelChangesValue">Any</span>
                                            </label>
                                            <input type="range" class="form-range" id="hotelChangesSlider" min="0" max="7" value="7">
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Team filters -->
                                <div class="mb-3">
                                    <label class="form-label">Teams</label>
                                    <div id="teamFilters"></div>
                                </div>
                                
                                <!-- City filters -->
                                <div class="mb-3">
                                    <label class="form-label">Cities</label>
                                    <div id="cityFilters"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-8">
                        <div id="resultsCountContainer" class="d-flex justify-content-between align-items-center mb-3">
                            <div>
                                <span id="resultsCount" class="badge bg-primary">0</span> trips found
                            </div>
                        </div>
                        <div id="tripResults"></div>
                        <div class="row justify-content-center">
                            <div class="col-12">
                                <div id="loading" class="custom-loading-container d-none">
                                    <div class="loading-content">
                                        <!-- Normal loading animation -->
                                        <div id="loadingAnimation" class="loading-animation">
                                            <div class="football">
                                                <div class="football-pattern"></div>
                                            </div>
                                            <div class="travel-path">
                                                <div class="city-marker marker-start"></div>
                                                <div class="travel-line"></div>
                                                <div class="city-marker marker-mid"></div>
                                                <div class="travel-line"></div>
                                                <div class="city-marker marker-end"></div>
                                            </div>
                                        </div>
                                        
                                        <!-- Updated loading messages for a more natural feel -->
                                        <div id="loadingMessages" class="loading-messages">
                                            <p class="loading-message active">Looking for matches in your travel window...</p>
                                            <p class="loading-message">Finding the best way to get around Germany...</p>
                                            <p class="loading-message">We're working out how long each trip takes...</p>
                                            <p class="loading-message">Building your day-by-day schedule...</p>
                                            <p class="loading-message">Almost ready with your football trip plan...</p>
                                        </div>
                                        
                                        <!-- Cancel button for loading state -->
                                        <button id="cancelSearch" class="cancel-search-btn">
                                            <i class="fas fa-times-circle"></i> Cancel Search
                                        </button>
                                        
                                        <!-- No results message - hidden by default -->
                                        <div id="noResultsMessage" class="no-results-message d-none">
                                            <i class="fas fa-search-minus"></i>
                                            <h4>No Trips Found</h4>
                                            <p>We couldn't find any trips matching your criteria.</p>
                                            <button onclick="returnToSearch()" class="return-to-search-btn">
                                                <i class="fas fa-arrow-up"></i> Back to Search
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="about" class="py-5 bg-light">
            <div class="container">
                <h2 class="text-center mb-4">How It Works</h2>
                <div class="row">
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center">
                                <div class="feature-icon mb-3">
                                    <i class="fas fa-search fa-3x text-primary"></i>
                                </div>
                                <h3>Search</h3>
                                <p>Enter your preferences including start location, dates, and teams you want to see.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center">
                                <div class="feature-icon mb-3">
                                    <i class="fas fa-route fa-3x text-primary"></i>
                                </div>
                                <h3>Plan</h3>
                                <p>Our algorithm finds the optimal trip routing to maximize matches and minimize travel time.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card h-100 border-0 shadow-sm">
                            <div class="card-body text-center">
                                <div class="feature-icon mb-3">
                                    <i class="fas fa-futbol fa-3x text-primary"></i>
                                </div>
                                <h3>Enjoy</h3>
                                <p>Follow your personalized itinerary to experience the best football Germany has to offer.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-dark text-light py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h3>BundesTrip</h3>
                    <p>Your ultimate companion for planning football trips across Germany.</p>
                </div>
                <div class="col-md-3">
                    <h5>Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="./index.html" class="text-light">Home</a></li>
                        <li><a href="./schedules.html" class="text-light">Schedules</a></li>
                        <li><a href="./about.html" class="text-light">About Us</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5>Follow Us</h5>
                    <div class="social-links">
                        <a href="https://www.linkedin.com/in/eyalpasha/" class="text-light me-2" target="_blank" rel="noopener" title="LinkedIn"><i class="fab fa-linkedin"></i><span class="visually-hidden">LinkedIn</span></a>
                        <a href="https://www.facebook.com/eyal.pasha" class="text-light me-2" target="_blank" rel="noopener" title="Facebook"><i class="fab fa-facebook"></i><span class="visually-hidden">Facebook</span></a>
                        <a href="https://www.instagram.com/eyalpasha" class="text-light me-2" target="_blank" rel="noopener" title="Instagram"><i class="fab fa-instagram"></i><span class="visually-hidden">Instagram</span></a>
                    </div>
                </div>
            </div>
            <div class="mt-3 text-center">
                <small>&copy; 2025 BundesTrip. All rights reserved.</small>
            </div>
        </div>
    </footer>

    <!-- At the bottom of your index.html file -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="script.js" type="module"></script>
</body>
</html>